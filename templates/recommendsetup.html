{% extends "header_footer.html" %}
{% block title %}
Recommendation Setup
{% endblock %}
{% block content %}

<style>
    :root {
        --primary: #6c63ff;       /* Main purple color from the image */
        --primary-dark: #5046e5;
        --primary-light: rgba(108, 99, 255, 0.1); /* Adjusted alpha for better visibility */
        --text-dark: #f1f1f1;  /* Dark text */
        --text-light: #9e9e9e; /* Lighter text */
        --background-light: #1e1e1e; /* Adjusted to a dark card-like color */
        --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.5); /* Increased shadow for darker background */
        --transition-normal: all 0.3s ease;
    }

    .setup-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem 1rem;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: var(--text-dark); /* Keep text dark for contrast */
    }

    .page-title {
        text-align: center;
        margin-bottom: 0.5rem;
        color: var(--text-dark); /*  Keep title dark */
        font-size: 2.25rem;
        font-weight: 600;
    }

    .subtitle {
        text-align: center;
        margin-bottom: 2rem;
        color: var(--text-light); /* Adjust subtitle color */
        font-size: 1.1rem;
    }

    .divider {
        width: 80px;
        height: 3px;
        background-color: var(--primary);
        margin: 0.5rem auto 2rem;
        border-radius: 3px;
        transition: var(--transition-normal);
    }

    .setup-form {
        background-color: var(--background-light); /* match card color */
        border-radius: 12px;
        padding: 2rem;
        box-shadow: var(--card-shadow);
    }

    .meals-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .meal-section {
        background-color: var(--background-light); /* match card color */
        border-radius: 12px;
        padding: 1.5rem;
        transition: var(--transition-normal);
    }

    .meal-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        color: var(--text-dark); /*  Keep title dark */
        text-align: center;
    }

    .meal-divider {
        width: 50px;
        height: 2px;
        background-color: var(--primary);
        margin: 0.5rem auto 1.5rem;
        transition: var(--transition-normal);
    }

    .select-container {
        margin-bottom: 1.5rem;
    }

    .select-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--text-dark); /*  Keep label dark */
    }

    .select-input {
        width: 100%;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        border: 1px solid #444; /* Darker border */
        background-color: #333;  /* match card color */
        font-size: 1rem;
        color: var(--text-dark); /*  Keep text dark */
        transition: var(--transition-normal);
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23f1f1f1' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E"); /* Adjust arrow color for visibility */
        background-repeat: no-repeat;
        background-position: right 1rem center;
        background-size: 1rem;
    }

    .select-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.2); /* Primary color shadow */
    }

    .preferences-section {
        margin-top: 3rem;
    }

    .preferences-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        color: var(--text-dark); /*  Keep title dark */
        text-align: center;
    }

    .preferences-divider {
        width: 60px;
        height: 2px;
        background-color: var(--primary);
        margin: 0.5rem auto 1rem;
    }

    .checkbox-container {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }

    .checkbox-item {
        display: inline-flex;
        align-items: center;
        margin-right: 0.5rem;
        transition: var(--transition-normal);
    }

    .checkbox-input {
        display: none;
    }

    .checkbox-label {
        display: inline-flex;
        align-items: center;
        padding: 0.5rem 1rem;
        border-radius: 50px;
        background-color: #333;/* Darker card color */
        font-size: 0.9rem;
        color: var(--text-dark); /*  Keep text dark */
        cursor: pointer;
        transition: var(--transition-normal);
        user-select: none;
        border: 1px solid #444; /* Darker borders */
    }

    .checkbox-input:checked + .checkbox-label {
        background-color: var(--primary);
        color: white;
    }

    .submit-button {
        display: block;
        width: 200px;
        margin: 2rem auto 0;
        background-color: var(--primary);
        color: white;
        padding: 1rem 2rem;
        border-radius: 50px;
        text-decoration: none;
        border: none;
        font-weight: 600;
        font-size: 1.1rem;
        cursor: pointer;
        transition: var(--transition-normal);
        box-shadow: 0 4px 6px rgba(108, 99, 255, 0.2); /* Primary color */
    }

    .submit-button:hover {
        background-color: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(108, 99, 255, 0.3); /* Primary color */
    }

    .submit-button:active {
        transform: translateY(0);
    }

    @media (max-width: 768px) {
        .meals-container {
            grid-template-columns: 1fr;
        }
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .fade-in {
        animation: fadeIn 0.8s ease forwards;
    }

    .delay-1 {
        animation-delay: 0.1s;
    }

    .delay-2 {
        animation-delay: 0.2s;
    }

    .delay-3 {
        animation-delay: 0.3s;
    }

    .delay-4 {
        animation-delay: 0.4s;
    }

    /* Override header styles to match dark theme */
    .header-container {
        background-color: var(--dark) !important;
    }

    .header-logo,
    .nav-item a {
        color: var(--text-dark) !important;
    }

    .nav-item a:hover,
    .nav-item a.active {
        color: var(--secondary) !important;
    }

    .header-button {
        background: var(--gradient) !important;
        color: var(--text-dark) !important;
    }

    .header-link {
        color: var(--text-dark) !important;
        border-color: var(--primary) !important;
    }

    .header-link:hover {
        background-color: rgba(108, 99, 255, 0.1) !important;
    }

    body {
        background-color: #0a0a0a;  /* Make sure body is dark */
    }
</style>

<div class="setup-container">
    <h1 class="page-title fade-in">Set Up Today's Recommendations</h1>
    <div class="divider fade-in"></div>
    <p class="subtitle fade-in delay-1">Customize your meal plan by selecting your preferences below</p>

    <form action="/recommendation" method="POST" class="setup-form fade-in delay-2">
        <div class="meals-container">
            <div class="meal-section">
                <h3 class="meal-title">Breakfast</h3>
                <div class="meal-divider"></div>

                <div class="select-container">
                    <label class="select-label" for="breakfast">Select dish type</label>
                    <select class="select-input" name="breakfast_dishes" id="breakfast" required>
                        <option value="toast">Toast</option>
                        <option value="grain">Grains</option>
                        <option value="egg">Eggs</option>
                        <option value="wrap">Wraps</option>
                        <option value="pasta">Pasta</option>
                    </select>
                </div>
            </div>

            <div class="meal-section">
                <h3 class="meal-title">Lunch</h3>
                <div class="meal-divider"></div>

                <div class="select-container">
                    <label class="select-label" for="lunch">Select dish type</label>
                    <select class="select-input" name="lunch_dishes" id="lunch" required>
                        <option value="stir-fried">Stir-Fried</option>
                        <option value="soup">Soup</option>
                        <option value="salad">Salad</option>
                        <option value="pasta">Pasta</option>
                        <option value="wrap">Wraps</option>
                    </select>
                </div>
            </div>

            <div class="meal-section">
                <h3 class="meal-title">Snack</h3>
                <div class="meal-divider"></div>

                <div class="select-container">
                    <label class="select-label" for="snack">Select dish type</label>
                    <select class="select-input" name="snack_dishes" id="snack" required>
                        <option value="toast">Toast</option>
                        <option value="grain">Grains</option>
                        <option value="wrap">Wraps</option>
                        <option value="pasta">Pasta</option>
                        <option value="baked">Baked</option>
                        <option value="drinks">Drinks</option>
                    </select>
                </div>
            </div>

            <div class="meal-section">
                <h3 class="meal-title">Dinner</h3>
                <div class="meal-divider"></div>

                <div class="select-container">
                    <label class="select-label" for="dinner">Select dish type</label>
                    <select class="select-input" name="dinner_dishes" id="dinner" required>
                        <option value="stir-fried">Stir-Fried</option>
                        <option value="soup">Soup</option>
                        <option value="salad">Salad</option>
                        <option value="pasta">Pasta</option>
                        <option value="wrap">Wraps</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="preferences-section">
            <div class="meals-container">
                <div class="meal-section fade-in delay-1">
                    <h3 class="preferences-title">Favorite Vegetables</h3>
                    <div class="preferences-divider"></div>

                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="lettuce" name="vege" value="lettuce" class="checkbox-input">
                            <label for="lettuce" class="checkbox-label">Lettuce</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tomato" name="vege" value="tomato" class="checkbox-input">
                            <label for="tomato" class="checkbox-label">Tomato</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="spinach" name="vege" value="spinach" class="checkbox-input">
                            <label for="spinach" class="checkbox-label">Spinach</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="carrot" name="vege" value="carrot" class="checkbox-input">
                            <label for="carrot" class="checkbox-label">Carrot</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="broccoli" name="vege" value="broccoli" class="checkbox-input">
                            <label for="broccoli" class="checkbox-label">Broccoli</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="cucumber" name="vege" value="cucumber" class="checkbox-input">
                            <label for="cucumber" class="checkbox-label">Cucumber</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="potato" name="vege" value="potato" class="checkbox-input">
                            <label for="potato" class="checkbox-label">Potato</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="sweet_potato" name="vege" value="sweet potato"
                                class="checkbox-input">
                            <label for="sweet_potato" class="checkbox-label">Sweet Potato</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="peas" name="vege" value="peas" class="checkbox-input">
                            <label for="peas" class="checkbox-label">Peas</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="cabbage" name="vege" value="cabbage" class="checkbox-input">
                            <label for="cabbage" class="checkbox-label">Cabbage</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="chickpea" name="vege" value="chickpea" class="checkbox-input">
                            <label for="chickpea" class="checkbox-label">Chickpea</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="corn" name="vege" value="corn" class="checkbox-input">
                            <label for="corn" class="checkbox-label">Corn</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mushroom" name="vege" value="mushroom" class="checkbox-input">
                            <label for="mushroom" class="checkbox-label">Mushroom</label>
                        </div>
                    </div>
                </div>

                <div class="meal-section fade-in delay-2">
                    <h3 class="preferences-title">Favorite Meat</h3>
                    <div class="preferences-divider"></div>

                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="chicken" name="meat" value="chicken" class="checkbox-input">
                            <label for="chicken" class="checkbox-label">Chicken</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="turkey" name="meat" value="turkey" class="checkbox-input">
                            <label for="turkey" class="checkbox-label">Turkey</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tuna" name="meat" value="tuna" class="checkbox-input">
                            <label for="tuna" class="checkbox-label">Tuna</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="salmon" name="meat" value="salmon" class="checkbox-input">
                            <label for="salmon" class="checkbox-label">Salmon</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="beef" name="meat" value="beef" class="checkbox-input">
                            <label for="beef" class="checkbox-label">Beef</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="pork" name="meat" value="pork" class="checkbox-input">
                            <label for="pork" class="checkbox-label">Pork</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="shrimp" name="meat" value="shrimp" class="checkbox-input">
                            <label for="shrimp" class="checkbox-label">Shrimp</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="egg" name="meat" value="egg" class="checkbox-input">
                            <label for="egg" class="checkbox-label">Egg</label>
                        </div>
                    </div>
                </div>

                <div class="meal-section fade-in delay-3">
                    <h3 class="preferences-title">Favorite Fruit</h3>
                    <div class="preferences-divider"></div>

                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="avocado" name="fruit" value="avocado" class="checkbox-input">
                            <label for="avocado" class="checkbox-label">Avocado</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="apple" name="fruit" value="apple" class="checkbox-input">
                            <label for="apple" class="checkbox-label">Apple</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="blueberry" name="fruit" value="blueberry"
                                class="checkbox-input">
                            <label for="blueberry" class="checkbox-label">Blueberry</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="banana" name="fruit" value="banana" class="checkbox-input">
                            <label for="banana" class="checkbox-label">Banana</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mango" name="fruit" value="mango" class="checkbox-input">
                            <label for="mango" class="checkbox-label">Mango</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="strawberry" name="fruit" value="strawberry"
                                class="checkbox-input">
                            <label for="strawberry" class="checkbox-label">Strawberry</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="blackberry" name="fruit" value="blackberry"
                                class="checkbox-input">
                            <label for="blackberry" class="checkbox-label">Blackberry</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="kiwi" name="fruit" value="kiwi" class="checkbox-input">
                            <label for="kiwi" class="checkbox-label">Kiwi</label>
                        </div>
                    </div>
                </div>

                <div class="meal-section fade-in delay-4">
                    <h3 class="preferences-title">Favorite Carbs</h3>
                    <div class="preferences-divider"></div>

                    <div class="checkbox-container">
                        <div class="checkbox-item">
                            <input type="checkbox" id="rice" name="carb" value="rice" class="checkbox-input">
                            <label for="rice" class="checkbox-label">Rice</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="bread" name="carb" value="bread" class="checkbox-input">
                            <label for="bread" class="checkbox-label">Bread</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="oat" name="carb" value="oats" class="checkbox-input">
                            <label for="oat" class="checkbox-label">Oat</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="buckwheat" name="carb" value="buckwheat"
                                class="checkbox-input">
                            <label for="buckwheat" class="checkbox-label">Buckwheat</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="quinoa" name="carb" value="quinoa" class="checkbox-input">
                            <label for="quinoa" class="checkbox-label">Quinoa</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="macaroni" name="carb" value="macaroni"
                                class="checkbox-input">
                            <label for="macaroni" class="checkbox-label">Macaroni</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="noodle" name="carb" value="noodle" class="checkbox-input">
                            <label for="noodle" class="checkbox-label">Noodle</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tortilla" name="carb" value="tortilla"
                                class="checkbox-input">
                            <label for="tortilla" class="checkbox-label">Tortilla</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button type="submit" class="submit-button fade-in delay-4">Next</button>
    </form>

    <script>
        // Add animation on checkbox selection
        document.addEventListener('DOMContentLoaded', function () {
            const checkboxInputs = document.querySelectorAll('.checkbox-input');

            checkboxInputs.forEach(input => {
                input.addEventListener('change', function () {
                    const label = this.nextElementSibling;
                    if (this.checked) {
                        label.style.transform = 'scale(1.05)';
                        setTimeout(() => {
                            label.style.transform = 'scale(1)';
                        }, 200);
                    }
                });
            });

            // Add observer for scroll animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = 1;
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, {
                threshold: 0.1
            });

            document.querySelectorAll('.meal-section').forEach(section => {
                observer.observe(section);
            });

            document.body.style.backgroundColor = '#0a0a0a';  // Ensure body background is dark
        });
    </script>
</div>

{% endblock %}